;此脚为功能脚本，用于实现各种与脚本有关的功能
(@@InPutInteger @@InPutString @@useitemname @@OffLineMsg @@dealgold)
;----------------------------------------------------

[@KillPlay]
#ACT
SendMsg 5 你杀人了?

[@PlayLevelUp]
#IF
checkjob wizard
CHECKLEVELEX = 7
#ACT
SENDMSG 7 提示：恭喜您升级到7级，可以学习火球术技能！
SENDMSG 0 玩家「<$USERNAME>」通过努力已经达到了7级，希望有位勇士收为徒弟，继续探知神秘的玛法大陆。
break

#IF
checkjob warrior
CHECKLEVELEX = 7
#ACT
SENDMSG 7 提示：恭喜您升级到7级，可以学习基本剑术技能！
SENDMSG 0 玩家「<$USERNAME>」通过努力已经达到了7级，希望有位勇士收为徒弟，继续探知神秘的玛法大陆。
break

#IF
checkjob taoist
CHECKLEVELEX = 7
#ACT
SENDMSG 7 提示：恭喜您升级到7级，可以学习治愈术技能！
SENDMSG 0 玩家「<$USERNAME>」通过努力已经达到了7级，希望有位勇士收为徒弟，继续探知神秘的玛法大陆。
break

#IF
checkjob taoist
CHECKLEVELEX = 9
#ACT
SENDMSG 7 提示：恭喜您升级到9级，可以学习精神力战法技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 12
#ACT
SENDMSG 7 提示：恭喜您升级到12级，可以学习抗拒火环技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 13
#ACT
SENDMSG 7 提示：恭喜您升级到13级，可以学习诱惑之光技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 14
#ACT
SENDMSG 7 提示：恭喜您升级到14级，可以学习施毒术技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 16
#ACT
SENDMSG 7 提示：恭喜您升级到16级，可以学习地狱火技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 17
#ACT
SENDMSG 7 提示：恭喜您升级到17级，可以学习雷电术技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 18
#ACT
SENDMSG 7 提示：恭喜您升级到18级，可以学习灵魂火符技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 19
#ACT
SENDMSG 7 提示：恭喜您升级到19级，可以学习瞬息移动技能！
break

#IF
checkjob warrior
CHECKLEVELEX = 19
#ACT
SENDMSG 7 提示：恭喜您升级到19级，可以学习攻杀剑术技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 19
#ACT
SENDMSG 7 提示：恭喜您升级到19级，可以学习召唤骷髅技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 19
#ACT
SENDMSG 7 提示：恭喜您升级到19级，可以学习大火球技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 20
#ACT
SENDMSG 7 提示：恭喜您升级到20级，可以学习隐身术技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 21
#ACT
SENDMSG 7 提示：恭喜您升级到21级，可以学习集体隐身术技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 22
#ACT
SENDMSG 7 提示：恭喜您升级到22级，可以学习爆裂火焰技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 22
#ACT
SENDMSG 7 提示：恭喜您升级到22级，可以学习幽灵盾技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 24
#ACT
SENDMSG 7 提示：恭喜您升级到24级，可以学习火墙技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 25
#ACT
SENDMSG 7 提示：恭喜您升级到25级，可以学习神圣战甲术技能！
break

#IF
checkjob warrior
CHECKLEVELEX = 25
#ACT
SENDMSG 7 提示：恭喜您升级到25级，可以学习刺杀剑术技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 26
#ACT
SENDMSG 7 提示：恭喜您升级到26级，可以学习疾光电影技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 26
#ACT
SENDMSG 7 提示：恭喜您升级到26级，可以学习心灵启示技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 28
#ACT
SENDMSG 7 提示：恭喜您升级到28级，可以学习困魔咒技能！
break

#IF
checkjob warrior
CHECKLEVELEX = 28
#ACT
SENDMSG 7 提示：恭喜您升级到28级，可以学习半月弯刀技能！
break

#IF
checkjob warrior
CHECKLEVELEX = 30
#ACT
SENDMSG 7 提示：恭喜您升级到30级，可以学习野蛮冲撞技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 30
#ACT
SENDMSG 7 提示：恭喜您升级到30级，可以学习地狱雷光技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 31
#ACT
SENDMSG 7 提示：恭喜您升级到31级，可以学习魔法盾技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 32
#ACT
SENDMSG 7 提示：恭喜您升级到32级，可以学习圣言术技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 33
#ACT
SENDMSG 7 提示：恭喜您升级到33级，可以学习群体治疗术技能！
break

#IF
checkjob warrior
CHECKLEVELEX = 35
#ACT
SENDMSG 7 提示：恭喜您升级到35级，可以学习烈火剑法技能！
break

#IF
checkjob wizard
CHECKLEVELEX = 35
#ACT
SENDMSG 7 提示：恭喜您升级到35级，可以学习冰咆哮技能！
break

#IF
checkjob taoist
CHECKLEVELEX = 35
#ACT
SENDMSG 7 提示：恭喜您升级到35级，可以学习召唤神兽技能！
break


[@PlayDie]
#IF
KILLBYHUM
#ACT
SENDMSG 1 提示:玩家【<$KILLER> 】在:%m(%x:%y)把玩家<$USERNAME>干掉了！
#ELSEACT
SENDMSG 1 提示:怪物【<$MONKILLER>】在:%m(%x:%y)把玩家<$USERNAME>干掉了！

;----------------------------------------------------

[@STDMODEFUNC9]
#IF
gender woman
#ACT
HAIRSTYLE 1
SENDMSG 7 发型已经变更! 
BREAK
#IF
gender man
#ACT
HAIRSTYLE 1
SENDMSG 7 发型已经变更! 
BREAK

[@STDMODEFUNC10]
#IF
gender woman
#ACT
HAIRSTYLE 0
SENDMSG 7 发型已经变更! 
BREAK
#IF
gender man
#ACT
HAIRSTYLE 0
SENDMSG 7 发型已经变更! 
BREAK

[@STDMODEFUNC11]
#IF
#ACT
KILLMONEXPRATE 200 7200
Gmexecute showeffect 76
SENDMSG 0 玩家「<$USERNAME>」使用双倍卷轴，获得了2小时双倍时间。


[@STDMODEFUNC12]
#IF
#ACT
KILLMONEXPRATE 200 3600
Gmexecute showeffect 76
SENDMSG 0 玩家「<$USERNAME>」使用双倍宝典(小)，获得了1小时双倍时间。


[@STDMODEFUNC13]
#IF
#ACT
KILLMONEXPRATE 200 10800
Gmexecute showeffect 76
SENDMSG 0 玩家「<$USERNAME>」使用双倍宝典(中)，获得了3小时双倍时间。


[@STDMODEFUNC14]
#IF
#ACT
KILLMONEXPRATE 200 21600
Gmexecute showeffect 76
SENDMSG 0 玩家「<$USERNAME>」使用双倍宝典(大)，获得了6小时双倍时间。


[@StdModeFunc15]
#IF
#ACT
Gmexecute showeffect 79
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc16]
#IF
#ACT
Gmexecute showeffect 80
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc17]
#IF
#ACT
Gmexecute showeffect 81
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc18]
#IF
#ACT
Gmexecute showeffect 82
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc19]
#IF
#ACT
Gmexecute showeffect 83
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc20]
#IF
#ACT
Gmexecute showeffect 84
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc21]
#IF
#ACT
Gmexecute showeffect 85
SENDMSG 0 <$USERNAME>在:%m%x:%y处放烟花咯、大家快去欣赏哦。

[@StdModeFunc41]
#IF
small M3 60
#Act
INC M3 2
Gmexecute showeffect 79
Gmexecute showeffect 80
Gmexecute showeffect 81
Delaygoto 2000 @庆典蛋糕1
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@庆典蛋糕1]
#IF
small M3 60
#Act
INC M3 2
Gmexecute showeffect 80
Gmexecute showeffect 81
Gmexecute showeffect 82
Delaygoto 2000 @庆典蛋糕2
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@庆典蛋糕2]
#IF
small M3 60
#Act
INC M3 2
Gmexecute showeffect 81
Gmexecute showeffect 82
Gmexecute showeffect 83
Delaygoto 2000 @庆典蛋糕3
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@庆典蛋糕3]
#IF
  small M3 60
#Act
  INC M3 2
Gmexecute showeffect 82
Gmexecute showeffect 83
Gmexecute showeffect 84
Delaygoto 2000 @庆典蛋糕4
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@庆典蛋糕4]
#IF
small M3 60
#Act
INC M3 2
Gmexecute showeffect 83
Gmexecute showeffect 84
Gmexecute showeffect 85
Delaygoto 2000 @庆典蛋糕5
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@庆典蛋糕5]
#IF
small M3 60
#Act
INC M3 2
Gmexecute showeffect 79
Gmexecute showeffect 84
Gmexecute showeffect 85
Delaygoto 2000 @庆典蛋糕6
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@庆典蛋糕6]
#IF
small M3 60
#Act
INC M3 2
Gmexecute showeffect 79
Gmexecute showeffect 80
Gmexecute showeffect 85
Delaygoto 2000 @庆典蛋糕
SENDMSG 0 <$USERNAME>在:%m%x:%y处放庆典蛋糕了!大家快去看拉
#ELSEAct
MOV M3 0

[@StdModeFunc29]
#IF
#ACT
mapmove 0 326 272

[@StdModeFunc30]
#IF
#ACT
mapmove 3 330 330

[@StdModeFunc99]
一： <记录当前坐标/@TAGMAPINFO1> <移动到/@PMOVE1> -> <$TAGMAPNAME1> <$TAGX1> <$TAGY1>\
二： <记录当前坐标/@TAGMAPINFO2> <移动到/@PMOVE2> -> <$TAGMAPNAME2> <$TAGX2> <$TAGY2>\
三： <记录当前坐标/@TAGMAPINFO3> <移动到/@PMOVE3> -> <$TAGMAPNAME3> <$TAGX3> <$TAGY3>\
四： <记录当前坐标/@TAGMAPINFO4> <移动到/@PMOVE4> -> <$TAGMAPNAME4> <$TAGX4> <$TAGY4>\
五： <记录当前坐标/@TAGMAPINFO5> <移动到/@PMOVE5> -> <$TAGMAPNAME5> <$TAGX5> <$TAGY5>\
六： <记录当前坐标/@TAGMAPINFO6> <移动到/@PMOVE6> -> <$TAGMAPNAME6> <$TAGX6> <$TAGY6>\ \
<成功传送后才会消失一点.安全无毒.放心使用>\ 
[@PMOVE1]
#ACT
TAGMAPMOVE 1
[@PMOVE2]
#ACT
TAGMAPMOVE 2
[@PMOVE3]
#ACT
TAGMAPMOVE 3
[@PMOVE4]
#ACT
TAGMAPMOVE 4
[@PMOVE5]
#ACT
TAGMAPMOVE 5
[@PMOVE6]
#ACT
TAGMAPMOVE 6
[@TAGMAPINFO1]
#ACT
TAGMAPINFO 1
GOTO @StdModeFunc99
[@TAGMAPINFO2]
#ACT
TAGMAPINFO 2
GOTO @StdModeFunc99
[@TAGMAPINFO3]
#ACT
TAGMAPINFO 3
GOTO @StdModeFunc99
[@TAGMAPINFO4]
#ACT
TAGMAPINFO 4
GOTO @StdModeFunc99
[@TAGMAPINFO5]
#ACT
TAGMAPINFO 5
GOTO @StdModeFunc99
[@TAGMAPINFO6]
#ACT
TAGMAPINFO 6
GOTO @StdModeFunc99

[@RevMaster]
对方想拜你为师，你是否想收此人为徒？ \ \
『<同意/@ResposeMaster>』 \
『<不同意/@ResposeMasterFail>』

[@ResposeMaster]
#IF
#ACT
master responsemaster1 ok
close

[@ResposeMasterFail]
#if
#act
master responsemaster1 fail

[@EndMaster]
#if
#act
SENDMSG 0 %s完成了拜师收徒仪式!

[@EndMasterFail]
拜师失败！\ \
〖<关闭/@exit>〗

[@RevUnMaster]
对方向你请求脱离师徒关系，你是否答应？ \ \
『<我愿意/@ResposeUnMaster>』
〖<退出/@Exit>〗

[@ResposeUnMaster]
#if
#act 
unmaster REQUESTUNMASTER MASTER

[@PoseUnMasterEnd]
呵呵，你已经与徒弟脱离师徒关系了！！！ \ \
『<退出/@exit>』

[@RequestUnMasterEnd]
呵呵，你已经脱离师徒关系了！！！ \ \
『<退出/@exit>』

[@GroupItem0]
#IF
#ACT
SENDMSG 5 圣战套装隐藏属性被激发,攻击提升15%!

[@GroupItem1]
#IF
#ACT
SENDMSG 5 法神套装隐藏属性被激发:魔法提升15%!

[@GroupItem2]
#IF
#ACT
SENDMSG 5 天尊套装隐藏属性被激发!道术提升15%!

[@GroupItem3]
#IF
#ACT
SENDMSG 5 属性生效:头盔一顶攻击上限增加1%!

[@GroupItem4]
#IF
#ACT
SENDMSG 5 属性生效:头盔一顶魔法上限增加1%!

[@GroupItem5]
#IF
#ACT
SENDMSG 5 属性生效:头盔一顶道术上限增加1%!

[@GroupItem6]
#IF
#ACT
SENDMSG 5 衣服属性生效:攻击上限增加3%，体力恢复增加1%魔法恢复增加1%。

[@GroupItem7]
#IF
#ACT
SENDMSG 5 衣服属性生效:攻击上限增加3%，体力恢复增加1%魔法恢复增加1%。

[@GroupItem8]
#IF
#ACT
SENDMSG 5 衣服属性生效:道术上限增加3%，体力恢复增加1%魔法恢复增加1%。

[@GroupItem9]
#IF
#ACT
SENDMSG 5 衣服属性生效:道术上限增加3%，体力恢复增加1%魔法恢复增加1%。

[@GroupItem10]
#IF
#ACT
SENDMSG 5 衣服属性生效:魔法上限增加3点，HP增加20%，体力恢复增加1%魔法恢复增加1%。

[@GroupItem11]
#IF
#ACT
SENDMSG 5 衣服属性生效:魔法上限增加3点，HP增加20%，体力恢复增加1%魔法恢复增加1%。





[@StartAutoOnline]
#IF
CHECKMAPNAME 3
#ACT
SENDMSG 6 当前地图禁止挂机
#ELSEACT
StartAutoPlayGame
SENDMSG 6 开始挂机，使用快捷键“CTRL+ALT+X”停止挂机


[@StopAutoOnline]
#IF
#ACT
StopAutoPlayGame
SENDMSG 6 命令停止挂机，使用快捷键“CTRL+ALT+X”开始挂机

[@updatePoint1]
#if
#act
  $pa_get2 GameGold N$ResultPoint
  gamegold = <$str(N$ResultPoint)>
  
[@updatePoint3]
#if
#act
  mov N0 0
  MOV N1 0
  MOV N2 0 
  $s_get_int 会员系统.会员当前等级.sql,<$USERID> N0
  $s_get_int 会员系统.充值确定VIP等级.sql,<$USERID> N1
  $s_get_int 会员系统.会员当前等级.sql,<$USERID> N2
#if
  CHECKMEMBERLEVEL < <$str(N2)>  
#act
  SETMEMBERLEVEL = <$str(N2)>  
#if
  Small N0 <$str(N2)>
#act
  SendMsg 7 会员等级提升,请在会员服务中查看Vip<$str(N2)>特权!!!
#if
  CHECKFENGHAO  Vip<$str(N2)>
#elseact 
  RECYCFENGHAO Vip1 1
  RECYCFENGHAO Vip2 1
  RECYCFENGHAO Vip3 1
  RECYCFENGHAO Vip4 1
  RECYCFENGHAO Vip5 1
  RECYCFENGHAO Vip6 1
  RECYCFENGHAO Vip7 1
  RECYCFENGHAO Vip8 1
  RECYCFENGHAO Vip9 1
  RECYCFENGHAO Vip10 1
  GiveFengHao Vip<$str(N2)> 1
#if
  CheckActiveFengHao Vip<$str(N2)>  
#act
  goto @ActiveTitleVip
  
[@UnactiveTitle_1]
#if
#act
   goto @UnactiveTitleVip
[@ActiveTitle_1] 
#if
#act
   goto @ActiveTitleVip

[@UnactiveTitleVip]
#if
#act
  SETICON 0 -1
 
[@ActiveTitleVip] 
#if
  CHECKMEMBERLEVEL > 0
  
#act
  SetIcon 0 9 87 32 22 1 0 1 300 0
  
  
[@锻造进度条完成]
#if
#act
  #call [..\QuestDiary\try\合成装备.txt] @合成装备开始
[@锻造进度条中断]
#if
#act
  messagebox 你停止了锻造动作
[@宝箱打开进度条完成]
#if
#act
  #call [..\QuestDiary\try\宝箱系统.txt] @宝箱打开初始化
[@宝箱打开进度条中断]
#if
#act
  messagebox 你停止了打开宝箱动作
  
[@强化进度条完成]
#if
#act
[@强化进度条中断]
#if
#act
  mov S$SynthesisBoxDialogButtonStr <imgex:9:32:33:34:370:30:/@开始强化(1)><text:开始强化:295:41{FCOLOR=251}>\  
  mov N$NextStep 0
  messagebox 你停止了强化装备动作

[@注灵进度条完成]
#if
#act
[@注灵进度条中断]
#if
#act
  mov S$SoulBoxDialogButtonStr <imgex:9:32:33:34:115:240:/@洗练装备><text:开始洗练:40:251{FCOLOR=251}>\  
  mov N$NextStep 0
  messagebox 你停止了注灵动作  
  
[@回收进度条完成]
#if
#act
[@回收进度条中断]
#if
#act
  mov N$NextStep 0